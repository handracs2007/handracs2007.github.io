---
layout: post
title: Simple Paging
date: '2012-05-17T11:24:00.001+08:00'
author: Handra
tags:
- Algorithm and Data Structure
modified_time: '2012-05-17T11:24:30.334+08:00'
blogger_id: tag:blogger.com,1999:blog-6088975468803563517.post-4174177649308689726
blogger_orig_url: https://handracs.blogspot.com/2012/05/simple-paging.html
---

<span class="Apple-style-span" style="font-family: Verdana, sans-serif;">Paging literally means making data displayed in multiple pages. Paging is used specially for website, where displaying large amount of data can be so troublesome by making the downloaded data bigger and thus increasing the response time.<br /><br />Paging can be done in many ways. In this tutorial, I would like to show you a very simple method we can use to do the paging. Here, we just need to enable the user to move to the next page (if any) and back to the previous page (if any). Also, for the sake of simplicity, I will use dummy data stored hard-codedly into an array. However, the concept is similar. OK, let's start !!!<br /><br /><pre class="prettyprint lang-php"><br />    /* Maximum number of items to show, per page */<br />    $maxItemPerPage = 10 ;<br />    <br />    /* <br />     * Prepare the dummy data<br />     * Used just for the sake of this tutorial.<br />     */<br />    $data = array ( ) ;<br /><br />    for ( $i = 1 ; $i &lt;= 112 ; $i ++ )<br />        array_push( $data , "Item " . $i ) ;<br /></pre>First of all, we define the maximum number of items to show per page. In this tutorial, I set the maximum number of items to show per page to 10 items. This value can be changed according to your need. However, sometimes, this value can also be changed by users as to accommodate his preferences. Sometimes, users' screen is big enough to show large count of data per page. After that, I created dummy data. Please not that in reality, mostly data stored in the database.<br /><br /><pre class="prettyprint lang-php"><br />    /* <br />     * Create function to retrieve the data.<br />     * <br />     * The content of this function must be changed<br />     * according to the neccessity and logic of your<br />     * application regarding the data retrieval process.<br />     */<br />    function retrieveData ( $pageNumber )<br />    {<br />        global $data ;<br />        global $maxItemPerPage ;<br />        <br />        /* page the data */<br />        /* Prepares the variable used to store paged data */<br />        $result = array ( ) ;<br />        <br />        /* Calculate the data count */<br />        $dataCount = count ( $data ) ;<br />        <br />        /* Calculate the offset. Offset literally means from what index should we start retrieving the data */<br />        $offset = ( $pageNumber - 1 ) * $maxItemPerPage ;<br />        <br />        /* Calculate the maximum index we can use to retrieve the data */<br />        $limit = $offset + $maxItemPerPage ;<br />        <br />        /* Check if the limit is more than the number of data we have, just set the limit to the data count */<br />        if ( $limit &gt; $dataCount )<br />            $limit = $dataCount ;<br />        <br />        /* Store the data now */<br />        for ( $i = $offset ; $i &lt; $limit ; $i ++ )<br />            array_push ( $result , $data [ $i ] ) ;<br />        <br />        /* Return the paging result */<br />        return $result ;<br />    }<br /></pre>The next step, I created a helper function to ease the retrieval of data. All the retrieval data logic put into that function. Also note that the content of that function must be changed according to the way you retrieve the data. If you use SQL to retrieve the data, you can use the SQL Query to do the paging automatically. Here, I will show you an example of how to filter data retrieved using MySQL SQL command. Please refer to your DBMS documentation for command supported in your own DBMS.<br /><pre class="prettyprint lang-sql"><br />SELECT &lt;columns&gt; FROM &lt;table&gt; LIMIT &lt;limit&gt;, &lt;offset&gt;<br /></pre><br /><pre class="prettyprint lang-php"><br />    /* Get the page number from query string */<br />    $page = $_GET [ "p" ] ;<br />    <br />    /* If not "p" (page) given, then assume the requested is page 1 */<br />    if ( ! isset ( $page ) )<br />        $page = 1 ;<br />    <br />    /* Calculate max page number */<br />    $maxPageNumber = ceil ( count ( $data ) / $maxItemPerPage ) ;    <br />    $paged_data = retrieveData ( $page ) ;<br /></pre>One part we need to handle is to get the requested page number sent by the user. We can easily pass it using query string passed into the server. Note that, for security sake, you should always check for the validity of values passed by the user, in case they want to inject something bad into your server by using the weakness or security hole you created unintentionally by your bad code. For this tutorial, I omit that checking.<br /><br />As you can see, I use "p" variable that is sent to server using HTTP GET method to store the requested page number. If, the "p" variable is empty, I assume that the user is requesting data in the first page. So, all required data is ready, I now just need to display the data to the user.<br /><pre class="prettyprint lang-php"><br />    /* Print the data */<br />    echo "&lt;table style=\"width: 100%\" border=\"1\"&gt;&lt;tr&gt;&lt;th style=\"background-color: #00FFAA\"&gt;Items&lt;/th&gt;&lt;/tr&gt;" ;<br />    <br />    /* Loop through the paged-data */<br />    foreach ( $paged_data as $item )<br />        echo "&lt;tr&gt;&lt;td style=\"background-color: #EEEEEE\"&gt;$item&lt;/td&gt;&lt;/tr&gt;" ;<br />    <br />    /* Print the prev/next page link */<br />    if ( $maxPageNumber &gt; 1 )<br />    {<br />        echo "&lt;tr&gt;&lt;td style=\"background-color: #00FFFF; text-align: center\"&gt;" ;<br />        <br />        /* We can go backward to previous page since the minimum page is 1 and we are currently not at page 1 */<br />        if ( $page &gt; 1 )<br />            echo "&lt;a href=?p=" . ( $page - 1 ) . "&gt;Prev. Page&lt;/a&gt;&nbsp;&nbsp;" ;<br />        <br />        /* We can go forward to the next page since the current page is still less than the maximum page */<br />        if ( $page &lt; $maxPageNumber )<br />            echo "&lt;a href=?p=" . ( $page + 1 ) . "&gt;Next Page&lt;/a&gt;" ;<br />        <br />        echo "&lt;/td&gt;&lt;/tr&gt;" ;<br />    }<br />        <br />    echo "&lt;/table&gt;" ;<br />?&gt;<br /></pre>I think the printing process is very common. I don't really need to explain it a bit deeper, I suppose. The logic you  need to have a look is actually the checking whether we need to display the "Prev. Page" link and "Next Page" link or not. The inline documentation should explain better. See below for the full source code.<br /><pre class="prettyprint lang-php"><br />&lt;?php<br />    /* Maximum number of items to show, per page */<br />    $maxItemPerPage = 10 ;<br />    <br />    /* <br />     * Prepare the dummy data<br />     * Used just for the sake of this tutorial.<br />     */<br />    $data = array ( ) ;<br /><br />    for ( $i = 1 ; $i &lt;= 112 ; $i ++ )<br />        array_push( $data , "Item " . $i ) ;<br />    <br />    /* <br />     * Create function to retrieve the data.<br />     * <br />     * The content of this function must be changed<br />     * according to the neccessity and logic of your<br />     * application regarding the data retrieval process.<br />     */<br />    function retrieveData ( $pageNumber )<br />    {<br />        global $data ;<br />        global $maxItemPerPage ;<br />        <br />        /* page the data */<br />        /* Prepares the variable used to store paged data */<br />        $result = array ( ) ;<br />        <br />        /* Calculate the data count */<br />        $dataCount = count ( $data ) ;<br />        <br />        /* Calculate the offset. Offset literally means from what index should we start retrieving the data */<br />        $offset = ( $pageNumber - 1 ) * $maxItemPerPage ;<br />        <br />        /* Calculate the maximum index we can use to retrieve the data */<br />        $limit = $offset + $maxItemPerPage ;<br />        <br />        /* Check if the limit is more than the number of data we have, just set the limit to the data count */<br />        if ( $limit &gt; $dataCount )<br />            $limit = $dataCount ;<br />        <br />        /* Store the data now */<br />        for ( $i = $offset ; $i &lt; $limit ; $i ++ )<br />            array_push ( $result , $data [ $i ] ) ;<br />        <br />        /* Return the paging result */<br />        return $result ;<br />    }<br />        <br />    /* Get the page number from query string */<br />    $page = $_GET [ "p" ] ;<br />    <br />    /* If not "p" (page) given, then assume the requested is page 1 */<br />    if ( ! isset ( $page ) )<br />        $page = 1 ;<br />    <br />    /* Calculate max page number */<br />    $maxPageNumber = ceil ( count ( $data ) / $maxItemPerPage ) ;    <br />    $paged_data = retrieveData ( $page ) ;<br />    <br />    /* Print the data */<br />    echo "&lt;table style=\"width: 100%\" border=\"1\"&gt;&lt;tr&gt;&lt;th style=\"background-color: #00FFAA\"&gt;Items&lt;/th&gt;&lt;/tr&gt;" ;<br />    <br />    /* Loop through the paged-data */<br />    foreach ( $paged_data as $item )<br />        echo "&lt;tr&gt;&lt;td style=\"background-color: #EEEEEE\"&gt;$item&lt;/td&gt;&lt;/tr&gt;" ;<br />    <br />    /* Print the prev/next page link */<br />    if ( $maxPageNumber &gt; 1 )<br />    {<br />        echo "&lt;tr&gt;&lt;td style=\"background-color: #00FFFF; text-align: center\"&gt;" ;<br />        <br />        /* We can go backward to previous page */<br />        if ( $page &gt; 1 )<br />            echo "&lt;a href=?p=" . ( $page - 1 ) . "&gt;Prev. Page&lt;/a&gt;&nbsp;&nbsp;" ;<br />        <br />        /* We can go forward to the next page */<br />        if ( $page &lt; $maxPageNumber )<br />            echo "&lt;a href=?p=" . ( $page + 1 ) . "&gt;Next Page&lt;/a&gt;" ;<br />        <br />        echo "&lt;/td&gt;&lt;/tr&gt;" ;<br />    }<br />        <br />    echo "&lt;/table&gt;" ;<br />?&gt;<br /></pre><br /><br />That's it. Hope you enjoy the tutorial and can gain benefit from it. Remember, this is a very simple one. You can also use another way to do paging by enabling user to go to certain page directly. Or, if you are a professional programmer wannabe, don't worry, there are many frameworks out there that handle all the nifty-gritty in doing beautiful paging mechanism.<br /><br />Happy code fellas.... </span>